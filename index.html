
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>K.A.R.A. - Sala Tem√°tica BioMar</title>
  <style>
    body {
      background-color: #000b1f;
      color: cyan;
      font-family: 'Courier New', monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      margin: 0;
    }
    h1 {
      margin-bottom: 5px;
    }
    input, button {
      font-size: 18px;
      padding: 10px;
      margin-top: 15px;
      border-radius: 6px;
      border: none;
    }
    button {
      background-color: cyan;
      color: #000b1f;
      cursor: pointer;
      font-weight: bold;
    }
    button:hover {
      background-color: #00aaff;
    }
    #video {
      margin-top: 20px;
      max-width: 600px;
      border: 3px solid cyan;
      display: none;
    }
    #kara-section {
      margin-top: 30px;
      display: none;
      flex-direction: column;
      align-items: center;
    }
    .kara-face {
      width: 300px;
      height: 300px;
      background-color: #001f3f;
      border: 5px solid cyan;
      border-radius: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      animation: pulse 4s infinite;
    }
    .eyes {
      display: flex;
      justify-content: center;
      margin-bottom: 40px;
    }
    .eye {
      width: 40px;
      height: 40px;
      background-color: cyan;
      border-radius: 50%;
      margin: 0 20px;
      animation: blink 4s infinite;
      position: relative;
    }
    .eye::after {
      content: "";
      position: absolute;
      width: 15px;
      height: 15px;
      background: #000b1f;
      border-radius: 50%;
      top: 12px;
      left: 12px;
    }
    .mouth {
      width: 100px;
      height: 30px;
      background-color: cyan;
      border-radius: 20px;
      animation: talk 1s infinite;
    }
    @keyframes blink {
      0%, 90%, 100% { transform: scaleY(1); }
      95% { transform: scaleY(0.1); }
    }
    @keyframes talk {
      0%, 100% { height: 30px; }
      50% { height: 10px; }
    }
    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 15px cyan; }
      50% { box-shadow: 0 0 30px cyan; }
    }
    #fala {
      margin-top: 20px;
      padding: 15px;
      max-width: 600px;
      text-align: center;
      background-color: #002c4a;
      border-radius: 10px;
      font-size: 20px;
      min-height: 80px;
    }
  </style>
</head>
<body>

<h1>üîê Interface da K.A.R.A. - Projeto BioMar</h1>
<p>Digite o c√≥digo da esta√ß√£o para liberar o v√≠deo da c√¢mera:</p>

<input type="text" id="codigoInput" placeholder="Ex: OSTRA101" autocomplete="off" />
<button onclick="mostrarVideo()">Enviar</button>

<video id="video" controls onended="mostrarKara()" preload="auto"></video>

<div id="kara-section">
  <div class="kara-face">
    <div class="eyes">
      <div class="eye"></div>
      <div class="eye"></div>
    </div>
    <div class="mouth" id="mouth"></div>
  </div>
  <div id="fala"></div>
  <audio id="audio"></audio>
  <button id="btn-votar" style="margin-top:30px; display:none;" onclick="votar()">Votar para pr√≥xima fase</button>
</div>

<script>
  const videos = {
    "OSTRA101": "ostra.mp4",
    "VERMEX202": "vermex.mp4",
    "CORAL303": "coral.mp4",
    "TUBARAOX404": "tubaraox.mp4",
    "FLORESTA505": "floresta.mp4"
  };

  const falas = {
    "OSTRA101": "As ostras reagiram a um som agudo √†s 02:14. Ativa√ß√£o defensiva‚Ä¶ sinal de presen√ßa estranha.",
    "VERMEX202": "A atividade do solo aumentou na √°rea 6B. As minhocas foram perturbadas por um objeto met√°lico.",
    "CORAL303": "A sombra detectada √†s 02:15 n√£o bate com nenhuma criatura conhecida naquela √°rea.",
    "TUBARAOX404": "A criatura detectada n√£o corresponde a nenhum padr√£o conhecido. Isso‚Ä¶ n√£o deveria existir.",
    "FLORESTA505": "As pegadas humanas v√£o em dire√ß√£o ao tanque restrito. Algu√©m entrou‚Ä¶ ou saiu."
  };

  const audios = {
    "OSTRA101": "OSTRA101.mp3",
    "VERMEX202": "VERMEX202.mp3",
    "CORAL303": "CORAL303.mp3",
    "TUBARAOX404": "TUBARAOX404.mp3",
    "FLORESTA505": "FLORESTA505.mp3"
  };

  const textoBoasVindas = "Bem-vindos √† central de investiga√ß√£o marinha. O Dr. Armando L√∫cio est√° morto. Voc√™s devem descobrir o que aconteceu. Receba um c√≥digo em cada esta√ß√£o e retorne aqui para digitar. Boa sorte, detetive.";
  const textoCodigoInvalido = "C√≥digo inv√°lido. Nenhuma c√¢mera encontrada com esse padr√£o. Tente novamente.";
  const textoSucesso = "Parab√©ns, detetive! Voc√™ desvendou o que muitos tentaram esconder. O mundo precisa saber da verdade.";
  const textoErro = "Hmmm‚Ä¶ sua conclus√£o n√£o bate com os dados analisados. Mas continue tentando, a verdade est√° l√°.";
  const textoDespedida = "Obrigado por participar. O mist√©rio ainda paira sobre n√≥s. Que a ci√™ncia continue sendo sua lanterna.";
  const textoVotacao = "Queremos saber sua opini√£o: voc√™ quer passar para a pr√≥xima fase? Digite 'SIM' para continuar ou 'N√ÉO' para encerrar a investiga√ß√£o.";

  const videoElement = document.getElementById("video");
  const falaElement = document.getElementById("fala");
  const karaSection = document.getElementById("kara-section");
  const audioElement = document.getElementById("audio");
  const mouthElement = document.getElementById("mouth");
  const btnVotar = document.getElementById("btn-votar");

  falaElement.innerText = textoBoasVindas;
  falaElement.style.display = "block";

  function mostrarVideo() {
    const codigo = document.getElementById("codigoInput").value.trim().toUpperCase();
    falaElement.style.display = "none";
    karaSection.style.display = "none";
    btnVotar.style.display = "none";
    mouthElement.style.animationPlayState = "paused";
    audioElement.pause();

    if (!videos[codigo]) {
      alert(textoCodigoInvalido);
      return;
    }

    videoElement.src = videos[codigo];
    videoElement.style.display = "block";
    videoElement.play();
  }

  function mostrarKara() {
    const codigo = document.getElementById("codigoInput").value.trim().toUpperCase();

    if (!falas[codigo]) {
      falaElement.innerText = textoCodigoInvalido;
      falaElement.style.display = "block";
      return;
    }

    falaElement.innerText = falas[codigo];
    falaElement.style.display = "block";
    karaSection.style.display = "flex";
    videoElement.style.display = "none";

    audioElement.src = audios[codigo];
    audioElement.play();

    mouthElement.style.animationPlayState = "running";
    audioElement.onended = () => {
      mouthElement.style.animationPlayState = "paused";
      btnVotar.style.display = "inline-block";
    };
  }

  function votar() {
    let resposta = prompt(textoVotacao).trim().toUpperCase();
    if (resposta === "SIM") {
      alert(textoSucesso);
    } else if (resposta === "N√ÉO") {
      alert(textoDespedida);
    } else {
      alert("Resposta inv√°lida. Por favor, digite SIM ou N√ÉO.");
      votar();
    }
  }
</script>

</body>
</html>
